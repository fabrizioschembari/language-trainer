<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <title>Dizionario</title>
</head>
<body>
  <header class="dict-header">
    <div class="dict-header-inner">
      <button class="back-btn" id="backBtn" aria-label="Torna indietro">
        <svg viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
          <path fill-rule="evenodd" d="M12.78 4.22a.75.75 0 010 1.06L8.06 10l4.72 4.72a.75.75 0 11-1.06 1.06l-5.25-5.25a.75.75 0 01-1.06-1.06l5.25-5.25a.75.75 0 011.06 0z" clip-rule="evenodd"/>
        </svg>
      </button>
      <div class="dict-header-main">
        <div class="dict-header-title" id="dictTitle">Dizionario</div>
        <div class="dict-header-sub" id="dictSubtitle"></div>
      </div>
    </div>
  </header>

  <main class="dict-main">
    <!-- HEADER: blocco separato con tasto + input search -->
    <section class="search-block">
      <div class="search-row">
        <div class="search-box">
          <svg viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 013.894 9.39l2.708 2.707a.75.75 0 11-1.06 1.061l-2.707-2.708A5.5 5.5 0 119 3.5zm0 1.5a4 4 0 100 8 4 4 0 000-8z" clip-rule="evenodd"/>
          </svg>
          <input id="searchInput" type="text" placeholder="Cerca nella lingua sorgente..." />
        </div>
        <button class="btn-small" id="btnAddWordDict">Aggiungi nuova parola</button>
      </div>
      <div class="search-caption">Cerca o aggiungi vocaboli per questo dizionario.</div>
    </section>

    <!-- BODY: lista vocabolario -->
    <section id="chapters" class="chapters"></section>
  </main>

  <!-- FOOTER: direzione -->
  <footer class="app-footer">
    <div class="direction-pill">
      <div class="dir-lang" id="dirLeft">
        <span class="dir-flag" id="leftFlag">ðŸ‡¯ðŸ‡µ</span>
        <span class="dir-name" id="leftName">Giapponese</span>
      </div>
      <button class="swap-btn" id="swapBtn" aria-label="Inverti direzione">
        <svg viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
          <path d="M4.5 5.75A.75.75 0 015.25 5h7a.75.75 0 010 1.5H6.56l1.97 1.97a.75.75 0 01-1.06 1.06l-3.25-3.25A.75.75 0 014.5 5.75zm11 8.5a.75.75 0 01-.75.75h-7a.75.75 0 010-1.5h5.69l-1.97-1.97a.75.75 0 011.06-1.06l3.25 3.25c.3.3.3.79 0 1.08z"/>
        </svg>
      </button>
      <div class="dir-lang" id="dirRight">
        <span class="dir-flag" id="rightFlag">ðŸ‡®ðŸ‡¹</span>
        <span class="dir-name" id="rightName">Italiano</span>
      </div>
    </div>
  </footer>

  <!-- Sheet: aggiungi / modifica parola -->
  <div class="backdrop-fullscreen hidden" id="addWordSheetDict">
    <div class="sheet">
      <div class="sheet-handle"></div>
      <div class="sheet-title" id="txtDictAddWordTitle">Nuova parola</div>
      <div class="sheet-sub" id="txtDictAddWordSubtitle"></div>

      <div class="field-label" id="sheetSrcLabel">Da</div>
      <input type="text" id="sheetSrcTerm" placeholder="Termine sorgente">

      <div class="field-label" id="sheetDstLabel">A</div>
      <input type="text" id="sheetDstTerm" placeholder="Traduzione">

      <div class="sheet-actions">
        <button class="btn-ghost" id="cancelAddWordDict">Annulla</button>
        <button class="btn-fill" id="confirmAddWordDict">Salva</button>
      </div>
    </div>
  </div>

  <script src="dict.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
  <div class="dict-tools" style="padding:12px; display:flex; gap:8px;">
    <button id="btnExport" class="btn-fill">Esporta</button>
    <label for="btnImport" class="btn-fill" style="cursor:pointer;">Importa</label>
    <input id="btnImport" type="file" accept="application/json" style="display:none;" />
  </div>
</body>
</html>